openapi: 3.0.3
info:
  title: Transaction service
  version: 2.8.0
  description: Other Backbase services operate on transactions
  x-icon: local_atm
  x-deprecated: false
  x-api-dashboard-tags:
    - name: Retail
    - name: Business
servers:
  - description: Prism mock server
    url: 'http://localhost:4010'
  - description: Locally running service
    url: 'http://localhost:18095'
tags:
  - name: transaction-presentation
  - name: transaction-presentation-service
paths:
  /service-api/v2/transactions:
    get:
      summary: List transactions
      description: Retrieves a paginated list of transactions that fulfill the selection parameters
      operationId: getTransactions
      parameters:
        - $ref: '#/components/parameters/userId'
        - $ref: '#/components/parameters/serviceAgreementId'
        - description: Value that the transaction's amount must be greater than or equal to
          example: 5
          in: query
          name: amountGreaterThan
          required: false
          schema:
            type: number
        - description: Value that the transaction's amount must be less than or equal to
          example: 5
          in: query
          name: amountLessThan
          required: false
          schema:
            type: number
        - description: Date that the transaction's booking date must be after or equal to
          example: 2020-07-16T00:00:00.000Z
          in: query
          name: bookingDateGreaterThan
          required: false
          schema:
            type: string
        - description: Date that the transaction's booking date must be before or equal to
          example: 2020-07-16T00:00:00.000Z
          in: query
          name: bookingDateLessThan
          required: false
          schema:
            type: string
        - description: List of types that the transaction must have one of
          example:
            - Cheques
            - ATM
          in: query
          name: types
          required: false
          schema:
            type: array
            items:
              type: string
        - description: Text that the transaction's description must match
          example: Online payment - thank you
          in: query
          name: description
          required: false
          schema:
            type: string
        - description: Text that the transaction's reference must match
          example: BCA-123445
          in: query
          name: reference
          required: false
          schema:
            type: string
        - description: List of type groups that the transaction must have one of
          example:
            - Payment
            - Withdrawal
          in: query
          name: typeGroups
          required: false
          schema:
            type: array
            items:
              type: string
        - description: Text that the transaction's counterparty name must contain
          example: Spotify
          in: query
          name: counterPartyName
          required: false
          schema:
            type: string
        - description: Text that the transaction's counterparty account number must match
          example: HR1210010051863
          in: query
          name: counterPartyAccountNumber
          required: false
          schema:
            type: string
        - description: Credit/Debit Indicator that the transaction must be equal to
          example: DBIT
          in: query
          name: creditDebitIndicator
          required: false
          schema:
            type: string
            enum:
              - DBIT
              - CRDT
        - description: List of categories that the transaction must have one of
          example:
            - Transportation
            - Salary
            - Home
          in: query
          name: categories
          required: false
          schema:
            type: array
            items:
              type: string
        - description: Text that the transaction's billing status must match
          example: BILLED
          name: billingStatus
          in: query
          required: false
          schema:
            type: string
        - description: State the transaction must be in
          name: state
          in: query
          required: false
          schema:
            $ref: '#/components/schemas/TransactionState'
        - description: Currency the transaction must match
          example: EUR
          in: query
          name: currency
          required: false
          schema:
            type: string
        - description: Indicates whether only transactions containing notes must be retrieved (1 means true)
          example: 1
          in: query
          name: notes
          required: false
          schema:
            type: integer
            format: int32
        - description: Transaction ID that must be retrieved
          example: ff8081817231805301723182ebdd0007
          in: query
          name: id
          required: false
          schema:
            type: string
        - description: |
            Arrangement ID of transactions that must be retrieved (internal one if calling with a user JWT token,
            external one otherwise)
          example: d9865a92-2b47-46de-ae2f-be5dc01f7fc4
          in: query
          name: arrangementId
          required: false
          schema:
            type: string
        - description: |
            List of Arrangement IDs to which transactions must belong to (internal ones if calling with a user JWT token,
            external ones otherwise)
          example:
            - 18c1dbf1-f2a3-4db1-8e10-fd5ed2aba99b
            - 63b918de-4011-4ba8-be17-19607110256d
          in: query
          name: arrangementsIds
          required: false
          schema:
            type: array
            items:
              type: string
        - description: Value that the transaction's check serial number must be greater than or equal to
          example: 52444
          in: query
          name: fromCheckSerialNumber
          required: false
          schema:
            type: integer
            format: int64
        - description: Value that the transaction's check serial number must be less than or equal to
          example: 78543
          in: query
          name: toCheckSerialNumber
          required: false
          schema:
            type: integer
            format: int64
        - description: List of check serial numbers that the transaction must have one of
          example:
            - 32124234
            - 5423534
          in: query
          name: checkSerialNumbers
          required: false
          schema:
            type: array
            items:
              type: integer
              format: int64
        - description: Search term that one of the fields configured in "backbase.transaction.search.fields" must contain
          in: query
          name: query
          required: false
          schema:
            type: string
        - description: Page number to retrieve transactions
          example: 20
          in: query
          name: from
          required: false
          schema:
            type: integer
            format: int32
            default: 0
        - description: |
            As an alternative for specifying 'from' this allows pointing to a record to start the retrieval from.
            Not supported out of the box.
          example: 76d5be8b-e80d-4842-8ce6-ea67519e8f74
          in: query
          name: cursor
          required: false
          schema:
            type: string
            default: ''
        - description: |
            Limit the number of elements on the response. When used in combination with cursor, the value
            is allowed to be a negative number to indicate requesting records upwards from the starting point indicated
            by the cursor.
          example: 80
          in: query
          name: size
          required: false
          schema:
            type: integer
            format: int32
            default: 10
        - description: |
            Field name that retrieved transactions must be ordered by, one of the following:
            * description
            * bookingDate
            * arrangementId
            * reference
            * typeGroup
            * type
            * category
            * valueDate
            * amount
            * currency
            * creditDebitIndicator
            * instructedAmount
            * instructedCurrency
            * currencyExchangeRate
            * counterPartyName
            * counterPartyAccountNumber
            * checkSerialNumber
          in: query
          name: orderBy
          required: false
          schema:
            type: string
            default: bookingDate
        - description: Primary sorting direction for retrieved transactions
          in: query
          name: direction
          required: false
          schema:
            type: string
            default: DESC
            enum:
              - ASC
              - DESC
        - description: Secondary sorting direction for retrieved transactions
          in: query
          name: secDirection
          required: false
          schema:
            type: string
            default: DESC
            enum:
              - ASC
              - DESC
      responses:
        '200':
          description: Sorted transactions matching the filtering criteria requested
          headers:
            X-Total-Count:
              description: Total number of transactions matching the filtering criteria
              required: true
              schema:
                type: integer
              example: 100
            X-Available-Export-Types:
              description: Available export types given the transaction list retrieved
              required: true
              schema:
                type: string
              example: 'CSV,OFX,PDF'
            X-Unavailable-Export-Types-Reasons:
              description: Reasons explaining why some export types are not available given the transaction list retrived
              required: true
              schema:
                type: string
              example: '{ "OFX": ["MIXED_PRODUCT_KINDS"], "PDF": ["MULTIPLE_PRODUCTS", "TOO_MANY_ITEMS"] }'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionsGet'
              example:
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c371
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: www.starbucks.com
                  originalDescription: STARBUCKS 65000000764AMSTERDAM
                  typeGroup: Payment
                  type: Card Payment
                  category: Food Drinks
                  bookingDate: '2019-05-29'
                  valueDate: '2019-05-29'
                  transactionAmountCurrency:
                    amount: '7.5'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: Starbucks
                  counterPartyAccountNumber: NL91ABNA0423164312
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Zuidplein 10, 1077 XV'
                  creationTime: '2019-05-29T01:20:50.52Z'
                  disputeStatus: PENDING
                  batchOrderId: BATCH64b4d-a99f-1c9df
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c372
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: www.medimarket.com
                  originalDescription: ONLINE PAYMENT - THANK YOU
                  typeGroup: Payment
                  type: Card Payment
                  category: Shopping
                  bookingDate: '2019-05-25'
                  valueDate: '2019-05-25'
                  transactionAmountCurrency:
                    amount: '320.95'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: MediaMarkt
                  counterPartyAccountNumber: NL91ABNA0541164300
                  creationTime: '2019-05-25T00:10:11.02Z'
                  disputeStatus: REJECTED
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c373
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: albertheijn.nl
                  originalDescription: ALBERTH#2822
                  typeGroup: Payment
                  type: Card Payment
                  category: Shopping
                  bookingDate: '2019-05-20'
                  valueDate: '2019-05-20'
                  transactionAmountCurrency:
                    amount: '919.95'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: Albert Heijn
                  counterPartyAccountNumber: BE68539007547034
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2019-05-20T00:00:50.10Z'
                  disputeStatus: UNDISPUTED
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c3731214
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Internet Banking
                  typeGroup: Payment
                  type: International Payment
                  category: Transfers
                  bookingDate: '2019-05-15'
                  valueDate: '2019-05-16'
                  transactionAmountCurrency:
                    amount: '887.31'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  currencyExchangeRate: 0.8945
                  counterPartyName: Tusk Williams B.V
                  counterPartyAccountNumber: BE68539007547034
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2019-05-15T13:10:20.10+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c373c342
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Internet Banking
                  typeGroup: Payment
                  type: SEPA Payment
                  category: Income
                  bookingDate: '2019-05-22'
                  valueDate: '2019-05-22'
                  transactionAmountCurrency:
                    amount: '1919.95'
                    currencyCode: EUR
                  creditDebitIndicator: CRDT
                  counterPartyName: Backbase B.V
                  counterPartyAccountNumber: NL40ABNA0541164350
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Jacob Bontiusplaats 9, 1018 LL'
                  creationTime: '2019-05-22T00:00:50.52+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c374
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Internet Banking
                  typeGroup: Payment
                  type: SEPA Payment
                  category: Shopping
                  bookingDate: '2019-04-28'
                  valueDate: '2019-04-28'
                  transactionAmountCurrency:
                    amount: '111.95'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: Eneco Bank11
                  counterPartyAccountNumber: BA391290079401028494
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2019-04-20T11:00:21.00+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c375
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: albertheijn.nl
                  originalDescription: ALBERTHEIJN
                  typeGroup: Payment
                  type: Card Payment
                  category: Shopping
                  bookingDate: '2019-04-24'
                  valueDate: '2019-08-24'
                  transactionAmountCurrency:
                    amount: '86.54'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: Albert Heijn
                  counterPartyAccountNumber: BG80BNBG96611020345678
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2019-04-24T08:00:20.55+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c376
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Standing Order
                  typeGroup: Payment
                  type: SEPA Payment
                  category: Other Income
                  bookingDate: '2019-04-15'
                  valueDate: '2019-04-15'
                  transactionAmountCurrency:
                    amount: '5200'
                    currencyCode: EUR
                  creditDebitIndicator: CRDT
                  counterPartyName: Simons & Co. B.V.
                  counterPartyAccountNumber: HR1210010051863000160
                  counterPartyCity: Utrecht
                  counterPartyAddress: Vendelier 71. 3905PD
                  creationTime: '2019-04-15T19:00:10.330+03:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c377
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Internet Banking
                  typeGroup: Payment
                  type: Payment Sent
                  category: Transfers
                  bookingDate: '2019-04-15'
                  valueDate: '2019-04-15'
                  transactionAmountCurrency:
                    amount: '10'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: Sally Lambert
                  counterPartyAccountNumber: CY17002001280000001200527600
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2019-04-15T13:13:20.10+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c378
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: www.medimarket.com
                  originalDescription: ONLINE PAYMENT - THANK YOU
                  typeGroup: Payment
                  type: Card Payment
                  category: Shopping
                  bookingDate: '2019-03-13'
                  valueDate: '2019-03-13'
                  transactionAmountCurrency:
                    amount: '199.95'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: MediaMarkt
                  counterPartyAccountNumber: CZ6508000000192000145399
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2019-03-13T11:10:24.14+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c379
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Internet Banking
                  typeGroup: Payment
                  type: SEPA Payment
                  category: Transfers
                  bookingDate: '2019-02-13'
                  valueDate: '2019-02-13'
                  transactionAmountCurrency:
                    amount: '25'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: John White
                  counterPartyAccountNumber: DK5000400440116243
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2019-02-13T01:20:50.52Z'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c380
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: www.starbucks.com
                  originalDescription: STARBUCKS 65000000764AMSTERDAM
                  typeGroup: Payment
                  type: Card Payment
                  category: Food Drinks
                  bookingDate: '2019-02-13'
                  valueDate: '2019-02-13'
                  transactionAmountCurrency:
                    amount: '7.5'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  creationTime: '2019-02-13T01:20:50.52Z'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c381
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Internet Banking
                  typeGroup: Payment
                  type: Card Payment
                  category: Shopping
                  bookingDate: '2019-02-13'
                  valueDate: '2019-02-14'
                  transactionAmountCurrency:
                    amount: '66.54'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: Eneco Bank8
                  counterPartyAccountNumber: FO1464600009692713
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2019-02-13T01:20:50.52Z'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c382
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Standing Order
                  typeGroup: Payment
                  type: SEPA Payment
                  category: Category
                  bookingDate: '2019-01-10'
                  valueDate: '2019-01-10'
                  transactionAmountCurrency:
                    amount: '400'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: Simons & Co. B.V.
                  counterPartyAccountNumber: FI2112345600000785
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2019-01-10T10:10:33.01Z'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c383
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Internet Banking
                  typeGroup: Payment
                  type: SEPA Payment
                  category: Transfers
                  bookingDate: '2018-10-01'
                  valueDate: '2018-10-01'
                  transactionAmountCurrency:
                    amount: '31'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: Sally Lambert
                  counterPartyAccountNumber: FR1420041010050500013M02606
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2018-01-01T01:20:50.52+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c384
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Standing Order
                  typeGroup: Payment
                  type: Payment Received
                  category: Other Income
                  bookingDate: '2018-08-15'
                  valueDate: '2018-08-15'
                  transactionAmountCurrency:
                    amount: '25'
                    currencyCode: EUR
                  creditDebitIndicator: CRDT
                  counterPartyName: Eneco Bank12
                  counterPartyAccountNumber: GE29NB0000000101904917
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2018-08-15T01:20:50.52+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c385
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Internet Banking
                  typeGroup: Payment
                  type: SEPA Payment
                  category: Transfers
                  bookingDate: '2018-10-13'
                  valueDate: '2018-08-15'
                  transactionAmountCurrency:
                    amount: '640'
                    currencyCode: EUR
                  creditDebitIndicator: DBIT
                  counterPartyName: Sally Lambert
                  counterPartyAccountNumber: DE89370400440532013000
                  counterPartyCity: Amsterdam
                  counterPartyAddress: 'Stationsplein, 1012 AB'
                  creationTime: '2018-10-13T01:20:50.52+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c386
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Internet Banking
                  typeGroup: Payment
                  type: SEPA Payment
                  category: Income
                  bookingDate: '2018-07-13'
                  valueDate: '2018-07-15'
                  transactionAmountCurrency:
                    amount: '7200'
                    currencyCode: EUR
                  creditDebitIndicator: CRDT
                  counterPartyName: Simons & Co. B.V.
                  counterPartyAccountNumber: GI75NWBK000000007099453
                  counterPartyCity: Utrecht
                  counterPartyAddress: Vendelier 71. 3905PD
                  creationTime: '2018-07-13T09:00:50.12+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
                - id: ec9ec6fd-a99c-4cee-a73e-51f84b11c387
                  arrangementId: 3cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                  reference: 7e8f5718-946c-4a86-a8bb-d903a1a20db8
                  description: Internet Banking
                  originalDescription: ONLINE PAYMENT
                  typeGroup: Payment
                  type: SEPA Payment
                  categoryId: 123456
                  location:
                    id: 2
                    latitude: 39.5963005
                    longitude: -104.89158799999998
                  merchant:
                    id: 1
                    name: Lamborghini.com
                    logo: 'https://www.lamborghini.com/themes/custom/lambo/img/base/logo.png'
                    website: 'https://www.lamborghini.com/'
                  bookingDate: '2018-07-13'
                  valueDate: '2018-07-15'
                  transactionAmountCurrency:
                    amount: '7200'
                    currencyCode: EUR
                  creditDebitIndicator: CRDT
                  counterPartyName: Simons & Co. B.V.
                  counterPartyAccountNumber: GI75NWBK000000007099453
                  counterPartyCity: Utrecht
                  counterPartyAddress: Vendelier 71. 3905PD
                  counterPartyCategoryCode: 1234
                  creationTime: '2018-07-13T09:00:50.12+02:00'
                  additions:
                    settlementDate: '2020-06-01'
                    additionalCharges: '183.56'
                    purpose: vacation
                    purposeCode: '1'
                    fees: '62'
                    feeReferenceId: FEE-01
                    ultimateDebtorName: John Doe
                    counterPartyAddress: 'Zuidplein 10, 1077 XV'
                    counterPartyCity: Amsterdam
                    debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                    ultimateDebtorId: e7a2da343421
                    ultimateCreditorId: df8e1cac
                    ultimateCreditorName: Julia Pence
                    debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                    MMCCode: V
        '400':
          description: If one or more request parameters don't comply with the specification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestError'
              example:
                message: Bad Request
                key: GENERAL_ERROR
                errors:
                  - message: 'Value Exceeded. Must be between {min} and {max}.'
                    key: common.api.shoesize
                    context:
                      max: '50'
                      min: '1'
        '401':
          description: If the authentication credentials provided are invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnauthorizedError'
              example:
                message: Access to requested resource denied.
                key: GENERAL_ERROR
                errors:
                  - message: Resource access denied due to invalid credentials.
                    key: common.api.token
                    context:
                      accessToken: expired
        '403':
          description: If the current user doesn't have authorization to view the requested transactions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForbiddenError'
              example:
                message: Access to requested resource denied.
                key: GENERAL_ERROR
                errors:
                  - message: 'Resource access denied due to an insufficient user quota of {quota}.'
                    key: common.api.quota
                    context:
                      quota: someQuota
        '404':
          description: If arrangements linked to retrieved transactions cannot be found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotFoundError'
              example:
                message: Resource not found.
                key: GENERAL_ERROR
                errors:
                  - message: 'Unable to find the resource requested resource: {resource}.'
                    key: common.api.resource
                    context:
                      resource: aResource
        '500':
          description: If a runtime error occurs while processing the request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerError'
              example:
                message: Description of error
      tags:
        - transaction-presentation-service
    patch:
      summary: Update transactions
      description: Updates some attributes of a collection of transactions
      operationId: patchTransactions
      parameters:
        - $ref: '#/components/parameters/userId'
        - $ref: '#/components/parameters/serviceAgreementId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransactionsPatch'
            example:
              - id: TRANS0000000000001
                arrangementId: 1cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                billingStatus: BILLED
              - id: TRANS0000000000002
                arrangementId: 1cdb2224-8926-4b4d-a99f-1c9dfbbb4691
                category: Home
              - id: TRANS0000000000003
                arrangementId: 4bac-a99f-b2224-8872-46911c9df-2a-3b
                disputeStatus: REJECTED
      responses:
        '204':
          description: If the transactions have been updated successfully
        '400':
          description: If one or more request parameters don't comply with the specification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/400/content/application~1json/example'
        '401':
          description: If the authentication credentials provided are invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnauthorizedError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/401/content/application~1json/example'
        '403':
          description: If the current user doesn't have authorization to update the requested transactions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForbiddenError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/403/content/application~1json/example'
        '404':
          description: If the transactions or arrangements linked to them cannot be found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotFoundError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/404/content/application~1json/example'
        '500':
          description: If a runtime error occurs while processing the request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/500/content/application~1json/example'
      tags:
        - transaction-presentation-service
    post:
      summary: Create and/or update transactions
      description: Creates and/or updates a list of transactions
      operationId: postTransactions
      parameters:
        - $ref: '#/components/parameters/userId'
        - $ref: '#/components/parameters/serviceAgreementId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransactionsPost'
            example:
              - arrangementId: 1cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                externalId: EXTERNAL00000000000001
                externalArrangementId: 1cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                reference: BCA-123445
                description: Meal @ Burger King
                typeGroup: Payment
                type: Cash
                category: Fast Food
                bookingDate: '2016-02-28'
                valueDate: '2016-02-28'
                creditDebitIndicator: DBIT
                transactionAmountCurrency:
                  amount: '45.09'
                  currencyCode: USD
                currencyExchangeRate: 2.2
                counterPartyName: AF Chagal
                counterPartyAccountNumber: '2732'
                counterPartyCity: Amsterdam
                counterPartyAddress: 'Stationsplein, 1012 AB'
                checkSerialNumber: 0
                creationTime: '2016-02-27T07:20:50.52Z'
                disputeStatus: UNDISPUTED
                batchOrderId: BATCH64b4d-a99f-1c9df
                additions:
                  settlementDate: '2020-06-01'
                  additionalCharges: '183.56'
                  purpose: vacation
                  purposeCode: '1'
                  fees: '62'
                  feeReferenceId: FEE-01
                  ultimateDebtorName: John Doe
                  counterPartyAddress: 'Zuidplein 10, 1077 XV'
                  counterPartyCity: Amsterdam
                  debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                  ultimateDebtorId: e7a2da343421
                  ultimateCreditorId: df8e1cac
                  ultimateCreditorName: Julia Pence
                  debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                  MMCCode: V
              - arrangementId: 1cdb2224-8926-4b4d-a99f-1c9dfbbb4688
                externalId: EXTERNAL00000000000002
                externalArrangementId: 1cdb2224-8926-4b4d-a99f-1c9dfbbb4699
                reference: BCA-123445
                description: Meal @ Burger King
                typeGroup: Payment
                type: Cash
                category: Fast Food
                bookingDate: '2016-02-28'
                valueDate: '2016-02-28'
                creditDebitIndicator: DBIT
                transactionAmountCurrency:
                  amount: '10.29'
                  currencyCode: EUR
                instructedAmountCurrency:
                  amount: '321.20'
                  currencyCode: USD
                currencyExchangeRate: 2.2
                counterPartyName: AF Chagal
                counterPartyAccountNumber: '2732'
                counterPartyCity: Amsterdam
                counterPartyAddress: 'Stationsplein, 1012 AB'
                counterPartyCategoryCode: 1234
                checkSerialNumber: 0
                creationTime: '2016-02-28T09:22:16.43Z'
                enrichmentIndicator: DO_ENRICHMENT
                disputeStatus: PENDING
                batchOrderId: BATCH899-1c9df
                additions:
                  settlementDate: '2020-06-01'
                  additionalCharges: '183.56'
                  purpose: vacation
                  purposeCode: '1'
                  fees: '62'
                  feeReferenceId: FEE-01
                  ultimateDebtorName: John Doe
                  counterPartyAddress: 'Zuidplein 10, 1077 XV'
                  counterPartyCity: Amsterdam
                  debtorId: df8e1cac-e483-4ad1-87e6-e7a2da343421
                  ultimateDebtorId: e7a2da343421
                  ultimateCreditorId: df8e1cac
                  ultimateCreditorName: Julia Pence
                  debtorReference: '[{''name'':''CLEO V MONROE SR'',''role'':''PRIMARY''},{''name'':''LANIE Q PIERCE'',''role'':''JOINT''}]'
                  MMCCode: V
      responses:
        '201':
          description: If the transactions have been created and/or updated successfully in ALL_OR_NOTHING mode
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionsIds'
              example:
                - id: 0955e686-d31e-4216-b3dd-5d66161d536d
                  externalId: A01
                - id: 0955e686-d31e-4216-b3dd-5d6613465fmk
                  externalId: A02
                - externalId: A03
                  validationErrors:
                    - message: must not be null
                      key: transactions.api.invalid.externalArrangementId
                      context:
                        invalidValue: 'null'
        '207':
          description: If the transactions have been ingested in CONTINUE_ON_VALIDATION_ERROR mode
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionsIds'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/post/responses/201/content/application~1json/example'
        '400':
          description: If one or more request parameters don't comply with the specification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/400/content/application~1json/example'
        '404':
          description: If the arrangements linked specified cannot be found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotFoundError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/404/content/application~1json/example'
        '500':
          description: If a runtime error occurs while processing the request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/500/content/application~1json/example'
      tags:
        - transaction-presentation-service
  /service-api/v2/transactions/delete:
    post:
      summary: Delete one or more transactions
      description: 'Deletes one or more transactions, there are no restrictions on which transactions may be deleted'
      operationId: postDelete
      parameters:
        - $ref: '#/components/parameters/userId'
        - $ref: '#/components/parameters/serviceAgreementId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransactionsDelete'
            example:
              - id: TRANS0000000000001
              - legalEntityId: LE_001
              - arrangementId: ARR001
      responses:
        '204':
          description: If the transactions have been deleted successfully
        '400':
          description: If one or more request parameters don't comply with the specification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/400/content/application~1json/example'
        '500':
          description: If a runtime error occurs while processing the request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/500/content/application~1json/example'
      tags:
        - transaction-presentation-service
  /service-api/v2/transactions/refresh:
    post:
      summary: Trigger pulling transactions
      description: 'Starts the process of pulling transactions from Core for the specified Arrangements, transactions may be created and/or updated in this process'
      operationId: postRefresh
      parameters:
        - $ref: '#/components/parameters/userId'
        - $ref: '#/components/parameters/serviceAgreementId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshPost'
            example:
              - arrangementId: 1cdb2224-8926-4b4d-a99f-1c9dfbbb4699
              - arrangementId: 1cdb2234-8926-4b4d-a99f-1e9dfcba4688
      responses:
        '204':
          description: If the refresh process executed successfully
        '400':
          description: If one or more request parameters don't comply with the specification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestError'
              example:
                $ref: '#/paths/~1service-api~1v2~1transactions/get/responses/400/content/application~1json/example'
      tags:
        - transaction-presentation-service
components:
  schemas:
    TransactionState:
      enum:
        - COMPLETED
        - UNCOMPLETED
      type: string
      example: COMPLETED
    RefreshPost:
      type: array
      items:
        $ref: '#/components/schemas/ArrangementItem'
    TransactionsDelete:
      type: array
      items:
        $ref: '#/components/schemas/TransactionsDeleteRequestBody'
    TransactionsDeleteRequestBody:
      type: object
      description: 'Exactly one of id, legalEntityId or arrangementId is allowed within a single TransactionsDeleteRequestBody'
      additionalProperties: false
      properties:
        id:
          description: Unique identification for a transaction as used in the external system
          maxLength: 300
          type: string
        legalEntityId:
          description: 'Unique identification for a legal entity or member, as used in the external system. All transactions for all the arrangements of this legal entity will be deleted'
          maxLength: 300
          type: string
        arrangementId:
          description: 'Unique identification for an arrangement, as used in the external system. All transactions for this arrangement will be deleted'
          maxLength: 300
          type: string
        additions:
          description: Additional properties
          type: object
          additionalProperties:
            type: string
    TransactionsGet:
      type: array
      items:
        $ref: '#/components/schemas/TransactionItem'
    TransactionsIds:
      type: array
      items:
        $ref: '#/components/schemas/TransactionsPostResponseBody'
    TransactionsPatch:
      type: array
      items:
        $ref: '#/components/schemas/TransactionsPatchRequestBody'
    TransactionsPatchRequestBody:
      type: object
      additionalProperties: false
      properties:
        id:
          description: Unique identification for the transaction as used in the external system
          maxLength: 300
          type: string
        arrangementId:
          description: Unique identification for the arrangement of the transaction in the external system
          maxLength: 50
          type: string
        category:
          description: Transaction category
          maxLength: 50
          type: string
        billingStatus:
          maxLength: 8
          type: string
        notes:
          maxLength: 4000
          type: string
        disputeStatus:
          description: Indicates the dispute status of a transaction
          $ref: '#/components/schemas/DisputeStatus'
        additions:
          description: Additional properties
          type: object
          additionalProperties:
            type: string
        creationTime:
          description: Indicates the creation time of the transaction
          type: string
          format: date-time
      required:
        - arrangementId
        - id
    TransactionsPost:
      type: array
      items:
        $ref: '#/components/schemas/TransactionsPostRequestBody'
    TransactionsPostRequestBody:
      type: object
      additionalProperties: false
      properties:
        arrangementId:
          description: Reference to the product to which the transaction belongs
          maxLength: 50
          type: string
        externalId:
          description: Internally used unique external identification of the transaction
          maxLength: 300
          type: string
        externalArrangementId:
          description: External reference to the product to which the transaction belongs
          maxLength: 50
          type: string
        reference:
          description: A tag/label issued by the initiator of the transaction in order to be able to refer to the respective transaction
          maxLength: 36
          type: string
        description:
          maxLength: 280
          type: string
        typeGroup:
          description: Bank specific code of the group the transaaction type belangs to this to be mapped to in integration
          maxLength: 36
          type: string
        type:
          description: Bank specific code to be mapped to generic type in integration
          maxLength: 36
          type: string
        category:
          description: Transaction category
          maxLength: 50
          type: string
        bookingDate:
          description: The date the amount is posted to the balance of an account from a book keeping perspective.
          type: string
          format: date
        valueDate:
          description: The date on which an amount posted to an account becomes interest bearing
          type: string
          format: date
        creditDebitIndicator:
          $ref: '#/components/schemas/CreditDebitIndicator'
        transactionAmountCurrency:
          $ref: '#/components/schemas/Currency'
        instructedAmountCurrency:
          $ref: '#/components/schemas/Currency'
        currencyExchangeRate:
          description: The exchange rate (between both account and transaction currency) that was used for the conversion. To be used if those currencies are not the same
          type: number
        counterPartyName:
          description: The name of the counterparty
          maxLength: 128
          type: string
        counterPartyAccountNumber:
          description: The International Bank Account Number of the counterparty
          maxLength: 36
          type: string
        counterPartyBIC:
          description: The BIC of the counterparty
          maxLength: 11
          type: string
        counterPartyCountry:
          description: ISO Country code
          pattern: '^[A-Z]{2}$'
          type: string
        counterPartyCity:
          description: City of the counterparty
          maxLength: 35
          type: string
        counterPartyAddress:
          description: Address of the counterparty
          maxLength: 140
          type: string
        counterPartyBankName:
          description: The bank name of the counterparty
          maxLength: 128
          type: string
        counterPartyCategoryCode:
          description: The ISO 18245 merchant category code for the transaction.
          type: integer
          format: int32
          minimum: 1
        creditorId:
          description: Id of the creditor (Only for SEPA DD)
          maxLength: 19
          type: string
        mandateReference:
          description: Mandate Reference (Only for SEPA DD)
          maxLength: 128
          type: string
        billingStatus:
          maxLength: 8
          type: string
        checkSerialNumber:
          description: Serial number of the check. Each check has a different number for identification purposes.
          type: integer
          format: int64
          minimum: 0
          maximum: 10000000000000000
        sequenceNumber:
          maxLength: 20
          pattern: '(^[1-9][0-9]*)|0$'
          type: string
        runningBalance:
          description: Indicates the balance of the account at that moment when the transaction was executed
          type: number
          minimum: -100000000000000
          maximum: 1000000000000000
        creationTime:
          description: Indicates the creation time of the transaction
          type: string
          format: date-time
        checkImageAvailability:
          description: Indicates the state of check images for the transaction
          $ref: '#/components/schemas/CheckImageAvailability'
        enrichmentIndicator:
          $ref: '#/components/schemas/EnrichmentIndicator'
        disputeStatus:
          description: Indicates the dispute status of a transaction
          $ref: '#/components/schemas/DisputeStatus'
        batchOrderId:
          description: Transaction batch order ID from DBS batches
          maxLength: 50
          type: string
        additions:
          description: Additional properties
          type: object
          additionalProperties:
            type: string
      required:
        - bookingDate
        - creditDebitIndicator
        - description
        - externalArrangementId
        - externalId
        - type
        - typeGroup
        - transactionAmountCurrency
    TransactionsPostResponseBody:
      type: object
      description: Object that defines an id attribute only.
      additionalProperties: false
      properties:
        id:
          description: Internally used unique identification
          type: string
        externalId:
          description: Externally used unique identification
          type: string
        validationErrors:
          description: Validation errors
          type: array
          items:
            $ref: '#/components/schemas/ErrorItem'
        additions:
          description: Additional properties
          type: object
          additionalProperties:
            type: string
      required:
        - externalId
    ArrangementItem:
      type: object
      additionalProperties: false
      properties:
        arrangementId:
          description: Unique identification for the arrangement as used in the external system
          maxLength: 50
          type: string
        additions:
          description: Additional properties
          type: object
          additionalProperties:
            type: string
      required:
        - arrangementId
    TransactionItem:
      type: object
      additionalProperties: false
      properties:
        id:
          description: Internally used unique identification of the transaction
          maxLength: 50
          type: string
        arrangementId:
          description: Reference to the product to which the transaction belongs
          maxLength: 50
          type: string
        reference:
          description: A tag/label issued by the initiator of the transaction in order to be able to refer to the respective transaction
          maxLength: 36
          type: string
        description:
          description: Primary transaction description to show to end-users
          maxLength: 280
          type: string
        originalDescription:
          description: Original description provided by the financial institution if transaction enrichment is enabled
          maxLength: 140
          type: string
        typeGroup:
          description: Bank specific code of the group the transaaction type belangs to this to be mapped to in integration
          maxLength: 36
          type: string
        type:
          description: Bank specific code to be mapped to generic type in integration
          maxLength: 36
          type: string
        category:
          description: Transaction category
          maxLength: 50
          type: string
        categoryId:
          description: Unique id of the category
          type: integer
        location:
          description: Geographical coordinates of the transaction
          $ref: '#/components/schemas/TransactionLocation'
        merchant:
          description: Merchant information
          $ref: '#/components/schemas/TransactionMerchant'
        bookingDate:
          description: The date the amount is posted to the balance of an account from a book keeping perspective.
          type: string
          format: date
        valueDate:
          description: The date on which an amount posted to an account becomes interest bearing
          type: string
          format: date
        creditDebitIndicator:
          $ref: '#/components/schemas/CreditDebitIndicator'
        transactionAmountCurrency:
          $ref: '#/components/schemas/Currency'
        instructedAmountCurrency:
          $ref: '#/components/schemas/Currency'
        currencyExchangeRate:
          description: The exchange rate (between both account and transaction currency) that was used for the conversion. To be used if those currencies are not the same
          type: number
        counterPartyName:
          description: The name of the counterparty
          maxLength: 128
          type: string
        counterPartyAccountNumber:
          description: The International Bank Account Number of the counterparty
          maxLength: 36
          type: string
        counterPartyBIC:
          description: The BIC of the counterparty
          maxLength: 11
          type: string
        counterPartyCity:
          description: City of the counterparty
          maxLength: 35
          type: string
        counterPartyAddress:
          description: Address the counterparty
          maxLength: 140
          type: string
        counterPartyCountry:
          description: ISO Country code
          maxLength: 2
          minLength: 2
          type: string
        counterPartyBankName:
          description: The bank name of the counterparty
          maxLength: 128
          type: string
        counterPartyCategoryCode:
          description: The ISO 18245 merchant category code for the transaction.
          type: integer
          format: int32
          minimum: 1
        creditorId:
          description: Id of the creditor (Only for SEPA DD)
          maxLength: 19
          type: string
        mandateReference:
          description: Mandate Reference (Only for SEPA DD)
          maxLength: 128
          type: string
        billingStatus:
          maxLength: 8
          type: string
        checkSerialNumber:
          description: Serial number of the check. Each check has a different number for identification purposes.
          type: integer
          format: int64
        notes:
          maxLength: 4000
          type: string
        runningBalance:
          description: Indicates the balance of the account at that moment when the transaction was executed
          type: number
        creationTime:
          description: Indicates the creation time of the transaction
          type: string
          format: date-time
        checkImageAvailability:
          description: Indicates the state of check images for the transaction
          $ref: '#/components/schemas/CheckImageAvailability'
        disputeStatus:
          description: Indicates the dispute status of a transaction
          $ref: '#/components/schemas/DisputeStatus'
        batchOrderId:
          description: Transaction batch order ID from DBS batches
          maxLength: 50
          type: string
        additions:
          description: Additional properties
          type: object
          additionalProperties:
            type: string
      required:
        - arrangementId
        - bookingDate
        - creditDebitIndicator
        - description
        - id
        - type
        - typeGroup
        - transactionAmountCurrency
    TransactionLocation:
      type: object
      additionalProperties: false
      properties:
        id:
          description: Location id
          type: integer
        latitude:
          description: Latitude of the transaction coordinate
          type: number
        longitude:
          description: Longitude of the transaction coordinate
          type: number
        address:
          description: Full address of where the transaction happened
          type: string
      required:
        - id
    TransactionMerchant:
      type: object
      additionalProperties: false
      properties:
        id:
          description: Merchant id
          type: integer
        name:
          description: Merchant name
          type: string
        logo:
          description: The logo url
          type: string
        website:
          description: Merchant web adress
          type: string
      required:
        - id
        - name
    CreditDebitIndicator:
      description: Indicates whether the amount is credited or debited.
      type: string
      enum:
        - CRDT
        - DBIT
    CheckImageAvailability:
      type: string
      example: AVAILABLE
      enum:
        - AVAILABLE
        - UNAVAILABLE
    EnrichmentIndicator:
      type: string
      description: |
        Indicates whether transaction needs to be enriched or not by following logic.
        STANDARD_ENRICHMENT: Use default rules in service for enrichment
        DO_ENRICHMENT: Ignore any existing rules and enrich the transaction only if it's not enriched already
        FORCE_ENRICHMENT: Ignore any existing rules and enrich the transaction even if it's already enriched
        NO_ENRICHMENT: Ignore any existing rules and don't attempt to enrich the transaction
        CONFIGURED_ENRICHMENT: Use configured category in service for categorisation of the transaction
      example: DO_ENRICHMENT
      enum:
        - STANDARD_ENRICHMENT
        - DO_ENRICHMENT
        - FORCE_ENRICHMENT
        - NO_ENRICHMENT
        - CONFIGURED_ENRICHMENT
    DisputeStatus:
      enum:
        - UNDISPUTED
        - PENDING
        - REJECTED
        - REFUNDED
      type: string
      example: UNDISPUTED
    Currency:
      title: Currency
      type: object
      properties:
        amount:
          description: The amount in the specified currency
          type: string
          minimum: -1000000000000000000
          maximum: 1000000000000000000
        currencyCode:
          description: The alpha-3 code (complying with ISO 4217) of the currency that qualifies the amount
          type: string
          pattern: '^[A-Z]{3}$'
        additions:
          description: Additional properties
          type: object
          additionalProperties:
            type: string
      required:
        - amount
        - currencyCode
    ErrorItem:
      title: ErrorItem
      type: object
      properties:
        message:
          description: Any further information.
          type: string
          minLength: 1
        key:
          description: '{capability-name}.api.{api-key-name}. For generated validation errors this is the path in the document the error resolves to. e.g. object name + ''.'' + field'
          type: string
          minLength: 1
        context:
          description: Context can be anything used to construct localised messages.
          type: object
          additionalProperties:
            type: string
      required:
        - message
        - key
    BadRequestError:
      title: BadRequestError
      type: object
      required:
        - message
        - key
      properties:
        message:
          type: string
          description: Any further information
          minLength: 1
        key:
          type: string
          description: Error summary
          minLength: 1
        errors:
          type: array
          description: Detailed error information
          items:
            $ref: '#/components/schemas/ErrorItem'
    ForbiddenError:
      title: ForbiddenError
      type: object
      required:
        - message
        - key
      properties:
        message:
          type: string
          description: Any further information
          minLength: 1
        key:
          type: string
          description: Error summary
          minLength: 1
        errors:
          type: array
          description: Detailed error information
          items:
            $ref: '#/components/schemas/ErrorItem'
    InternalServerError:
      title: InternalServerError
      type: object
      description: Represents HTTP 500 Internal Server Error
      properties:
        message:
          type: string
          description: Any further information
          minLength: 1
        key:
          type: string
          description: Error summary
          minLength: 1
    NotFoundError:
      title: NotFoundError
      type: object
      required:
        - message
        - key
      properties:
        message:
          type: string
          description: Any further information
          minLength: 1
        key:
          type: string
          description: Error summary
          minLength: 1
        errors:
          type: array
          description: Detailed error information
          items:
            $ref: '#/components/schemas/ErrorItem'
    UnauthorizedError:
      title: UnauthorizedError
      type: object
      required:
        - message
        - key
      properties:
        message:
          type: string
          description: Any further information
          minLength: 1
        key:
          type: string
          description: Error summary
          minLength: 1
        errors:
          type: array
          description: Detailed error information
          items:
            $ref: '#/components/schemas/ErrorItem'
  parameters:
    userId:
      name: X-Transactions-UserId
      in: header
      description: User external ID
      required: false
      schema:
        type: string
      example: john
    serviceAgreementId:
      name: X-Transactions-ServiceAgreementId
      in: header
      description: Service Agreement ID of the end user for whom transactions need to be operated on
      required: false
      schema:
        type: string
      example: SA001
